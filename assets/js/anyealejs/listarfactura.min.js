function cargarJS(){consultarfactura()}function consultarfactura(){var a=document.getElementById("factura").value;$.ajax({url:"../controller/productoserviciocontroller.php",type:"GET",data:{factura:a,pagina:pagina,funcion:"buscarFactura"}}).done(function(a){var e=a.split("Â®"),t=parseInt(e[0]);numPagina=parseInt(t/10),t%10>0&&numPagina++;var n=document.getElementById("contenedorUL");n.innerHTML="";var r=document.createElement("li");r.className="page-item";var c=document.createElement("button");c.className="page-link",c.value="-",c.style.fontFamily="Times New Roman', Times, serif",c.addEventListener("click",function(){modificarPagina(this.value)}),c.innerHTML="&laquo;",r.appendChild(c),n.appendChild(r);var d=document.createElement("span");d.style.fontFamily="Times New Roman', Times, serif",d.style.letterSpacing="3px",d.style.background="white",d.innerHTML=" "+pagina+"/"+numPagina+" ",n.appendChild(d);var l=document.createElement("li");l.className="page-item";var o=document.createElement("button");o.className="page-link",o.style.fontFamily="Times New Roman', Times, serif",o.value="+",o.addEventListener("click",function(){modificarPagina(this.value)}),o.innerHTML="&raquo;",l.appendChild(o),n.appendChild(l);var u=JSON.parse(e[1]),s=document.getElementById("listarFactura");for(s.innerHTML="",i=0;i<u.length;i++)listarFactura(u[i]);0==u.length&&crearTr(6,"listarFactura")})}function modificarPagina(a){"-"==a&&pagina>1?pagina-=1:"+"==a&&pagina<numPagina&&(pagina+=1),consultarfactura()}function listarFactura(a){var e=document.createElement("tr");e.id=a.idFactura;var t=document.createElement("td");t.innerHTML=a.idFactura;var n=document.createElement("td");n.innerHTML=a.fechaCreacion+"/"+a.fechaModificar;var r=document.createElement("td");r.innerHTML=a.horaCreacion+"/"+a.horaModificar;var i=document.createElement("td");i.innerHTML="$"+separadorMiles(a.valorTotal);var c=document.createElement("td");1==a.estado&&(c.innerHTML="Factura activa"),2==a.estado&&(c.innerHTML="Factura pendiente"),3==a.estado&&(c.innerHTML="Factura pagada"),4==a.estado&&(c.innerHTML="Factura cancelada");var d=document.createElement("td"),l=document.createElement("div");l.className="btn-group";var o=document.createElement("button");o.type="button",o.className="btn btn-success",o.innerHTML="Acciones";var u=document.createElement("button");u.type="button",u.className="btn btn-success dropdown-toggle",u.setAttribute("data-toggle","dropdown");var s=document.createElement("span");s.className="sr-only",l.appendChild(o),l.appendChild(u),u.appendChild(s);var m=document.createElement("div");m.className="dropdown-menu",m.role="menu";var p=document.createElement("a");p.className="dropdown-item",p.style.margin="2px",p.setAttribute("data-bs-toggle","modal"),p.setAttribute("data-bs-target","#validarFormulario"),p.value=a.idFactura,p.addEventListener("click",function(){validarFactura(this)}),p.innerHTML='<i class="fas fa-check-circle"></i> Validar';var g=document.createElement("a");g.className="dropdown-item",g.style.margin="2px",g.setAttribute("data-bs-toggle","modal"),g.setAttribute("data-bs-target","#eliminarFormulario"),g.value=a.idFactura,g.addEventListener("click",function(){cancelarFactura(this)}),g.innerHTML='<i class="fas fa-ban"></i> Cancelar';var v=document.createElement("a");v.href="seguimientoFactura.php?idFactura="+a.idFactura,v.className="dropdown-item",v.innerHTML='<i class="fas fa-info"></i> Seguimiento';var f=document.createElement("a");f.className="dropdown-item",f.href="detalleFactura.php?idFactura="+a.idFactura,f.innerHTML='<i class="fas fa-eye"></i> Vista Factura',l.appendChild(m),m.appendChild(p),m.appendChild(g),m.appendChild(f),m.appendChild(v),d.appendChild(l),e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(c),e.appendChild(d);var h=document.getElementById("listarFactura");h.appendChild(e)}var pagina=1,numPagina=0;cargarJS();