function cargarJS(){fechaActual(),consultaPedido()}function fechaActual(){const e=new Date;date=e.getFullYear()+"-0"+(e.getMonth()+1)+"-"+e.getDate(),document.getElementById("fechaPedido").value=date}function consultaPedido(){var e=document.getElementById("fechaPedido").value,a=document.getElementById("recibido").value,t=document.getElementById("cancelado").value,n=document.getElementById("codigo").value;$.ajax({url:"../controller/pedidoController.php",type:"GET",data:{fecha:e,recibido:a,cancelado:t,codigo:n,pagina:pagina,funcion:"buscarPedido"}}).done(function(e){var a=e.split("Â®"),t=parseInt(a[0]);numPagina=parseInt(t/10),t%10>0&&numPagina++;var n=document.getElementById("contenedorUL");n.innerHTML="";var d=document.createElement("li");d.className="page-item";var o=document.createElement("button");o.className="page-link",o.value="-",o.style.fontFamily="Times New Roman', Times, serif",o.addEventListener("click",function(){modificarPagina(this.value)}),o.innerHTML="&laquo;",d.appendChild(o),n.appendChild(d);var r=document.createElement("span");r.style.fontFamily="Times New Roman', Times, serif",r.style.letterSpacing="3px",r.innerHTML=" "+pagina+"/"+numPagina+" ",n.appendChild(r);var l=document.createElement("li");l.className="page-item";var c=document.createElement("button");c.className="page-link",c.style.fontFamily="Times New Roman', Times, serif",c.value="+",c.addEventListener("click",function(){modificarPagina(this.value)}),c.innerHTML="&raquo;",l.appendChild(c),n.appendChild(l);var m=JSON.parse(a[1]),s=document.getElementById("filtroPedido");for(s.innerHTML="",i=0;i<m.length;i++)agregarPedido(m[i]);0==m.length&&crearTr(5,"filtroPedido")})}function modificarPagina(e){"-"==e&&pagina>1?pagina-=1:"+"==e&&pagina<numPagina&&(pagina+=1),consultaPedido()}function agregarPedido(e){var a=document.createElement("tr");a.id=e.idPedido;var t=document.createElement("td");t.innerHTML=e.idPedido;var n=document.createElement("td");n.innerHTML=e.fechaPedido;var d=document.createElement("td");1==e.entregaPedido?d.innerHTML="SI":d.innerHTML="NO";var i=document.createElement("td");1==e.eliminado?i.innerHTML="SI":i.innerHTML="NO";var o=document.createElement("td"),r=document.createElement("div");r.className="btn-group";var l=document.createElement("button");l.type="button",l.className="btn btn-success",l.innerHTML="Acciones";var c=document.createElement("button");c.type="button",c.className="btn btn-success dropdown-toggle",c.setAttribute("data-toggle","dropdown");var m=document.createElement("span");m.className="sr-only",r.appendChild(l),r.appendChild(c),c.appendChild(m);var s=document.createElement("div");s.className="dropdown-menu",s.role="menu";var u=document.createElement("a");u.href="formularioEditarPedido.php?idPedido="+e.idPedido,u.className="dropdown-item",u.innerHTML='<i class="fas fa-edit"></i> Editar';var p=document.createElement("a");p.href="seguimientoPedido.php?idPedido="+e.idPedido,p.className="dropdown-item",p.innerHTML='<i class="fas fa-info"></i> Seguimiento';var g=document.createElement("a");g.className="dropdown-item",g.setAttribute("data-bs-toggle","modal"),g.setAttribute("data-bs-target","#cancelarPedido"),g.value=e.idPedido,g.addEventListener("click",function(){cancelarPedido(this)}),g.innerHTML='<i class="fas fa-trash-alt"></i> Cancelar';var h=document.createElement("a");h.className="dropdown-item",h.setAttribute("data-bs-toggle","modal"),h.setAttribute("data-bs-target","#eliminarFormulario"),h.value=e.idPedido,h.addEventListener("click",function(){comprobarPedido(this)}),h.innerHTML='<i class="fas fa-check-circle"></i> Validar';var f=document.createElement("a");f.className="dropdown-item",f.href="detallePedido.php?idPedido="+e.idPedido,f.innerHTML='<i class="fas fa-eye"></i> Vista Pedido';var v=new Date;fechaActual=v.getMonth()+1<10?v.getFullYear()+"-0"+(v.getMonth()+1)+"-"+v.getDate():v.getFullYear()+"-"+(v.getMonth()+1)+"-"+v.getDate(),r.appendChild(s),e.fechaPedido==fechaActual&&0==e.entregaPedido&&0==e.eliminado&&s.appendChild(u),0==e.entregaPedido&&0==e.eliminado&&(s.appendChild(h),s.appendChild(g)),s.appendChild(f),s.appendChild(p),o.appendChild(r),a.appendChild(t),a.appendChild(n),a.appendChild(d),a.appendChild(i),a.appendChild(o);var P=document.getElementById("filtroPedido");P.appendChild(a)}var pagina=1,numPagina=0;cargarJS();