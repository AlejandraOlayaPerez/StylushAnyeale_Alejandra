function cargarJS(){fechaActual(),consultaPedido()}function fechaActual(){const e=new Date;date=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),document.getElementById("fechaPedido").value=date}function consultaPedido(){var e=document.getElementById("fechaPedido").value,a=document.getElementById("recibido").value,n=document.getElementById("cancelado").value,t=document.getElementById("codigo").value;$.ajax({url:"../controller/pedidocontroller.php",type:"GET",data:{fecha:e,recibido:a,cancelado:n,codigo:t,pagina:pagina,funcion:"buscarPedido"}}).done(function(e){var a=e.split("Â®"),n=parseInt(a[0]);numPagina=parseInt(n/10),n%10>0&&numPagina++;var t=document.getElementById("contenedorUL");t.innerHTML="";var d=document.createElement("li");d.className="page-item";var o=document.createElement("button");o.className="page-link",o.value="-",o.style.fontFamily="Times New Roman', Times, serif",o.addEventListener("click",function(){modificarPagina(this.value)}),o.innerHTML="&laquo;",d.appendChild(o),t.appendChild(d);var r=document.createElement("span");r.style.fontFamily="Times New Roman', Times, serif",r.style.letterSpacing="3px",r.innerHTML=" "+pagina+"/"+numPagina+" ",t.appendChild(r);var l=document.createElement("li");l.className="page-item";var c=document.createElement("button");c.className="page-link",c.style.fontFamily="Times New Roman', Times, serif",c.value="+",c.addEventListener("click",function(){modificarPagina(this.value)}),c.innerHTML="&raquo;",l.appendChild(c),t.appendChild(l);var m=JSON.parse(a[1]),s=document.getElementById("filtroPedido");for(s.innerHTML="",i=0;i<m.length;i++)agregarPedido(m[i]);0==m.length&&crearTr(5,"filtroPedido")})}function modificarPagina(e){"-"==e&&pagina>1?pagina-=1:"+"==e&&pagina<numPagina&&(pagina+=1),consultaPedido()}function agregarPedido(e){var a=document.createElement("tr");a.id=e.idPedido;var n=document.createElement("td");n.innerHTML=e.idPedido;var t=document.createElement("td");t.innerHTML=e.fechaPedido;var d=document.createElement("td");1==e.entregaPedido?d.innerHTML="SI":d.innerHTML="NO";var i=document.createElement("td");1==e.eliminado?i.innerHTML="SI":i.innerHTML="NO";var o=document.createElement("td"),r=document.createElement("div");r.className="btn-group";var l=document.createElement("button");l.type="button",l.className="btn btn-success",l.innerHTML="Acciones";var c=document.createElement("button");c.type="button",c.className="btn btn-success dropdown-toggle",c.setAttribute("data-toggle","dropdown");var m=document.createElement("span");m.className="sr-only",r.appendChild(l),r.appendChild(c),c.appendChild(m);var s=document.createElement("div");s.className="dropdown-menu",s.role="menu";var p=document.createElement("a");p.href="formularioeditarpedido.php?idPedido="+e.idPedido,p.className="dropdown-item",p.innerHTML='<i class="fas fa-edit"></i> Editar';var u=document.createElement("a");u.href="seguimientopedido.php?idPedido="+e.idPedido,u.className="dropdown-item",u.innerHTML='<i class="fas fa-info"></i> Seguimiento';var g=document.createElement("a");g.className="dropdown-item",g.setAttribute("data-bs-toggle","modal"),g.setAttribute("data-bs-target","#cancelarPedido"),g.value=e.idPedido,g.addEventListener("click",function(){cancelarPedido(this)}),g.innerHTML='<i class="fas fa-trash-alt"></i> Cancelar';var f=document.createElement("a");f.className="dropdown-item",f.setAttribute("data-bs-toggle","modal"),f.setAttribute("data-bs-target","#eliminarFormulario"),f.value=e.idPedido,f.addEventListener("click",function(){comprobarPedido(this)}),f.innerHTML='<i class="fas fa-check-circle"></i> Validar';var h=document.createElement("a");h.className="dropdown-item",h.href="detallepedido.php?idPedido="+e.idPedido,h.innerHTML='<i class="fas fa-eye"></i> Vista Pedido',r.appendChild(s),0==e.entregaPedido&&0==e.eliminado&&(s.appendChild(p),s.appendChild(f),s.appendChild(g)),s.appendChild(h),s.appendChild(u),o.appendChild(r),a.appendChild(n),a.appendChild(t),a.appendChild(d),a.appendChild(i),a.appendChild(o);var v=document.getElementById("filtroPedido");v.appendChild(a)}var pagina=1,numPagina=0;cargarJS();