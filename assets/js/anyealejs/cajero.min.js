function buscarCliente(){var e=document.getElementById("tipoDocumento2").value,n=document.getElementById("documentoIdentidad2").value;$.ajax({url:"../controller/clientecontroller.php",type:"GET",data:{tipoDocumento:e,documentoIdentidad:n,funcion:"buscarReservacionPorCC"}}).done(function(e){var n=JSON.parse(e),t=document.getElementById("informacionCliente");for(t.innerHTML="",i=0;i<n.length;i++)agregarBusqueda(n[i]);0==n.length&&crearTr(5,"informacionCliente")})}function agregarBusqueda(e){var n=document.createElement("tr");n.id=e.idCliente;var t=document.getElementById("idCliente");t.value=e.idCliente;var a=document.createElement("td"),o=document.createElement("button");o.className="btn btn-info",o.innerHTML="Seleccionar",o.type="button",o.addEventListener("click",function(){agregarCliente(e.idCliente,e.tipoDocumento,e.documentoIdentidad,e.primerNombre,e.segundoNombre,e.primerApellido,e.segundoApellido,e.email)});var r=document.createElement("td");r.innerHTML=e.tipoDocumento;var d=document.createElement("td");d.innerHTML=e.documentoIdentidad;var i=document.createElement("td");i.innerHTML=e.primerNombre+e.segundoNombre;var c=document.createElement("td");c.innerHTML=e.primerApellido+e.segundoApellido;var l=document.createElement("td");l.innerHTML=e.telefono,a.appendChild(o),n.appendChild(a),n.appendChild(r),n.appendChild(d),n.appendChild(i),n.appendChild(c),n.appendChild(l);var m=document.getElementById("informacionCliente");m.appendChild(n)}function crearReservacion(){window.location.href="crearreservacion.php?idCliente="+idC+"&cajero=cajero"}function agregarCliente(e,n,t,a,o,r,d,i,c,l,m,u,p,s,v){var g=document.getElementById("idCliente");g.value=e;var E=document.getElementById("tipoDocumento");E.value=n;var C=document.getElementById("documentoIdentidad");C.value=t;var h=document.getElementById("primerNombre");h.value=a;var f=document.getElementById("primerApellido");f.value=o;var y=document.getElementById("telefono");y.value=r,mostrarReservaciones(),$("#modal-xl").modal("hide"),idC=e;var T=document.getElementById("nuevaReservacion");T.style=""}function mostrarReservaciones(){var e=document.getElementById("idCliente").value;$.ajax({url:"../controller/reservacioncontroller.php",type:"GET",data:{idCliente:e,funcion:"buscarReservacionIdAjax"}}).done(function(e){var n=JSON.parse(e),t=document.getElementById("informacionCliente");for(t.innerHTML="",i=0;i<n.length;i++)agregarReservacion(n[i]);0==n.length&&crearTrReserva(8,"informacionReservacion")})}function agregarReservacion(e){var n=document.getElementById("informacionReservacion"),t=document.getElementById("tablaReservacion");t.style="";var a=document.createElement("tr");a.id=e.idReservacion;var o=document.createElement("td");o.innerHTML=e.nombreServicio;var r=document.createElement("td");r.innerHTML=e.fechaReservacion;var d=document.createElement("td");d.innerHTML=e.horaReservacion;var i=document.createElement("td");1==e.domicilio?i.innerHTML="SI":i.innerHTML="NO";var c=document.createElement("td");c.innerHTML=e.direccion;var l=document.createElement("td");l.className="precio",l.innerHTML=e.precio;document.getElementById("pago").value=e.precio,document.getElementById("cliente").value=e.idCliente;var m=document.createElement("td");1==e.validar?m.innerHTML="SI":m.innerHTML="NO";var u=document.createElement("td"),p=document.createElement("a");p.className="btn btn-danger",p.style.margin="2px",p.setAttribute("data-bs-toggle","modal"),p.setAttribute("data-bs-target","#eliminarFormulario"),p.value=e.idReservacion,p.addEventListener("click",function(){pagoReservacion(this)}),p.innerHTML='<i class="fas fa-money-check-alt"></i> Pagar',u.appendChild(p),a.appendChild(o),a.appendChild(r),a.appendChild(d),a.appendChild(i),a.appendChild(c),a.appendChild(l),a.appendChild(m),a.appendChild(u),n.appendChild(a)}function buscarProducto(){var e=document.getElementById("codigoProducto").value,n=document.getElementById("nombreProducto").value;$.ajax({url:"../controller/clientecontroller.php",type:"GET",data:{codigoProducto:e,nombreProducto:n,pagina:pagina,funcion:"buscarProductoAjax"}}).done(function(e){var n=e.split("Â®"),t=parseInt(n[0]);numPagina=parseInt(t/10),t%10>0&&numPagina++;var a=document.getElementById("contenedorUL");a.innerHTML="";var o=document.createElement("li");o.className="page-item";var r=document.createElement("button");r.className="page-link",r.value="-",r.style.fontFamily="Times New Roman', Times, serif",r.addEventListener("click",function(){modificarPagina(this.value)}),r.innerHTML="&laquo;",o.appendChild(r),a.appendChild(o);var d=document.createElement("span");d.style.fontFamily="Times New Roman', Times, serif",d.style.letterSpacing="3px",d.style.background="white",d.innerHTML=" "+pagina+"/"+numPagina+" ",a.appendChild(d);var c=document.createElement("li");c.className="page-item";var l=document.createElement("button");l.className="page-link",l.style.fontFamily="Times New Roman', Times, serif",l.value="+",l.addEventListener("click",function(){modificarPagina(this.value)}),l.innerHTML="&raquo;",c.appendChild(l),a.appendChild(c);var m=JSON.parse(n[1]),u=document.getElementById("informacionProducto");for(u.innerHTML="",i=0;i<m.length;i++)agregarProducto(m[i]);0==m.length&&crearTr(5,"informacionProducto")})}function modificarPagina(e){"-"==e&&pagina>1?pagina-=1:"+"==e&&pagina<numPagina&&(pagina+=1),buscarProducto()}function agregarProducto(e){var n=document.getElementById("informacionProducto"),t=document.createElement("tr");t.id=e.IdProducto;document.getElementById("informacionProducto");var a=document.getElementById(e.IdProducto),o=document.createElement("td"),r=document.createElement("button");r.className="btn btn-info",r.innerHTML="Seleccionar",r.type="button",r.addEventListener("click",function(){mostrarProductos(e.IdProducto,e.codigoProducto,e.nombreProducto,e.valorUnitario,this)}),null!=a&&(r.innerHTML="Seleccionado",r.className="btn btn-default",r.disabled=!0);var d=document.createElement("td");d.innerHTML=e.codigoProducto;var i=document.createElement("td");i.innerHTML=e.nombreProducto;var c=document.createElement("td");c.innerHTML=e.valorUnitario,o.appendChild(r),t.appendChild(o),t.appendChild(d),t.appendChild(i),t.appendChild(c),n.appendChild(t)}function mostrarProductos(e,n,t,a,o){trEliminar("tablaFacturaProducto");var r=document.getElementById("tablaFacturaProducto"),d=document.getElementById("tablaProducto");d.style="";var i=document.createElement("input");i.type="text",i.name="productos[]",i.value=e,i.style="display: none;";var c=document.createElement("tr");c.id=e;var l=document.createElement("td");l.innerHTML=n;var m=document.createElement("td");m.innerHTML=t;var u=document.createElement("td"),p=document.createElement("input");p.type="number",p.name="cantidadProducto[]",p.value="1",p.min="1",p.className="cantidadProducto",p.addEventListener("change",function(){calcularTotalProducto()});var s=document.createElement("td");s.className="valorUnitario",s.innerHTML=a;var v=document.createElement("td"),g=document.createElement("button");g.className="btn btn-danger",g.innerHTML="Eliminar",g.type="button",g.addEventListener("click",function(){eliminarTDProducto(e)}),c.appendChild(i),c.appendChild(l),c.appendChild(m),u.appendChild(p),c.appendChild(u),c.appendChild(s),v.appendChild(g),c.appendChild(v),r.appendChild(c),o.innerHTML="Seleccionado",o.className="btn btn-default",o.disabled=!0,calcularTotalProducto()}function calcularTotalProducto(){var e=document.getElementById("tablaFacturaProducto"),n=e.querySelectorAll("tr"),t=0;for(i=0;i<n.length;i++){var a=n[i].getElementsByClassName("valorUnitario")[0].innerHTML,o=n[i].getElementsByClassName("cantidadProducto")[0].value,r=parseFloat(a)*o;t+=r}r=document.getElementById("totalProducto");document.getElementById("total").value=t,r.innerHTML=t}function eliminarTDProducto(e){var n=document.getElementById("tablaFacturaProducto"),t=document.getElementById(e);n.removeChild(t),calcularTotalProducto()}var idC=0,pagina=1,numPagina=0;